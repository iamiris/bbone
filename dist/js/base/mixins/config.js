define(["base/bareModel"],function(e){var t=function(e,t){_.each(e,function(e,n){var r=this[n+"ConfigHandler"];r&&typeof r=="function"&&r.call(this,e,t),this.trigger("configChange:"+n,e)},this);var n=this.configHandler;n&&typeof n=="function"&&n.call(this,e,t),this.trigger("configChange",e)},n=function(n){var r=n.getOption("configs"),i=n.getOption("configDefaults");r=_.extend({},r,i);if(!_.isEmpty(r)){var s=new e(r);n.setConfig=function(e,t){s.set(e,t)},n.setConfigs=function(e){s.set(e)},n.getConfigs=function(){return s.toJSON()},n.resetConfigs=function(e){s.reset(e)},n.getConfig=function(e){return s.get(e)};var o=function(){t.call(n,s.toJSON(),!0),n.listenTo(s,"change",function(){t.call(n,s.changedAttributes())})};n instanceof Backbone.View&&!n.getOption("preRendered")?n.listenToOnce(n,"rendered",o):o()}};return n});